<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Detrend all TIFF images in an entire folder. — detrend-directory • detrendr</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Detrend all TIFF images in an entire folder. — detrend-directory"><meta name="description" content="Batch processing. Apply any of the available detrending routines to detrend
all of the TIFF images in a folder, saving the detrended images as TIFF files
in the same folder."><meta property="og:description" content="Batch processing. Apply any of the available detrending routines to detrend
all of the TIFF images in a folder, saving the detrended images as TIFF files
in the same folder."><meta property="og:image" content="/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">detrendr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.17</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/batch-mode.html">Batch mode</a></li>
    <li><a class="dropdown-item" href="../articles/linescan-data.html">Linescan data</a></li>
    <li><a class="dropdown-item" href="../articles/single-images.html">Detrending single images</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rorynolan/detrendr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Detrend all TIFF images in an entire folder.</h1>
      <small class="dont-index">Source: <a href="https://github.com/rorynolan/detrendr/blob/master/R/dir_detrend.R" class="external-link"><code>R/dir_detrend.R</code></a></small>
      <div class="d-none name"><code>detrend-directory.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Batch processing. Apply any of the available detrending routines to detrend
all of the TIFF images in a folder, saving the detrended images as TIFF files
in the same folder.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">dir_detrend_robinhood</span><span class="op">(</span></span>
<span>  folder_path <span class="op">=</span> <span class="st">"."</span>,</span>
<span>  swaps <span class="op">=</span> <span class="st">"auto"</span>,</span>
<span>  thresh <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  quick <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  msg <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">dir_detrend_rh</span><span class="op">(</span></span>
<span>  folder_path <span class="op">=</span> <span class="st">"."</span>,</span>
<span>  swaps <span class="op">=</span> <span class="st">"auto"</span>,</span>
<span>  thresh <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  quick <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  msg <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">dir_detrend_boxcar</span><span class="op">(</span></span>
<span>  folder_path <span class="op">=</span> <span class="st">"."</span>,</span>
<span>  <span class="va">l</span>,</span>
<span>  purpose <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"FCS"</span>, <span class="st">"FFS"</span><span class="op">)</span>,</span>
<span>  thresh <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  parallel <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  msg <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">dir_detrend_exp</span><span class="op">(</span></span>
<span>  folder_path <span class="op">=</span> <span class="st">"."</span>,</span>
<span>  <span class="va">tau</span>,</span>
<span>  purpose <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"FCS"</span>, <span class="st">"FFS"</span><span class="op">)</span>,</span>
<span>  thresh <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  parallel <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  msg <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">dir_detrend_polynom</span><span class="op">(</span></span>
<span>  folder_path <span class="op">=</span> <span class="st">"."</span>,</span>
<span>  <span class="va">degree</span>,</span>
<span>  purpose <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"FCS"</span>, <span class="st">"FFS"</span><span class="op">)</span>,</span>
<span>  thresh <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  parallel <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  msg <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-folder-path">folder_path<a class="anchor" aria-label="anchor" href="#arg-folder-path"></a></dt>
<dd><p>The path (relative or absolute) to the folder you wish to
process.</p></dd>


<dt id="arg-swaps">swaps<a class="anchor" aria-label="anchor" href="#arg-swaps"></a></dt>
<dd><p>The number of swaps (giving of one count from rich to poor) to
perform during the <em>Robin Hood</em> detrending. Set this to "auto" (the
default) to use Nolan's algorithm to automatically find a suitable value
for this parameter (recommended). For multi-channel images, it is possible
to have a different <code>swaps</code> for each channel by specifying <code>swaps</code> as a
vector or list.</p></dd>


<dt id="arg-thresh">thresh<a class="anchor" aria-label="anchor" href="#arg-thresh"></a></dt>
<dd><p>The threshold or thresholding method (see
<code><a href="https://rorynolan.github.io/autothresholdr/reference/mean_stack_thresh.html" class="external-link">autothresholdr::mean_stack_thresh()</a></code>) to use on the image prior to
detrending.</p></dd>


<dt id="arg-quick">quick<a class="anchor" aria-label="anchor" href="#arg-quick"></a></dt>
<dd><p>If <code>FALSE</code> (the default), the swap finding routine is run
several times to get a consensus for the best parameter. If <code>TRUE</code>, the
swap finding routine is run only once.</p></dd>


<dt id="arg-msg">msg<a class="anchor" aria-label="anchor" href="#arg-msg"></a></dt>
<dd><p>Receive messages to tell you how the processing of the directory
is going? Default is yes.</p></dd>


<dt id="arg-l">l<a class="anchor" aria-label="anchor" href="#arg-l"></a></dt>
<dd><p>The length parameter for <em>boxcar</em> detrending. The size of the
sliding window will be <code>2 * l + 1</code>. This must be a positive integer. Set
this to "auto" to use Nolan's algorithm to automatically find a suitable
value for this parameter (recommended). For multi-channel images, it is
possible to have a different <code>l</code> for each channel by specifying <code>l</code> as a
vector or list.</p></dd>


<dt id="arg-purpose">purpose<a class="anchor" aria-label="anchor" href="#arg-purpose"></a></dt>
<dd><p>What type of calculation do you intend to perform on the
detrended image? If it is an FFS (fluorescence fluctuation spectroscopy)
calculation (like number and brightness), choose 'FFS'. If it is an FCS
(fluorescence correlation spectroscopy) calculation (like cross-correlated
number and brightness or autocorrelation), choose 'FCS'. The difference is
that if <code>purpose</code> is 'FFS', the time series is corrected for non-stationary
mean and variance, whereas if <code>purpose</code> is 'FCS', the time series is
corrected for non-stationary mean only. <code>purpose</code> is not required for
<em>Robin Hood</em> detrending.</p></dd>


<dt id="arg-parallel">parallel<a class="anchor" aria-label="anchor" href="#arg-parallel"></a></dt>
<dd><p>Would you like to use multiple cores to speed up this
function? If so, set the number of cores here, or to use all available
cores, use <code>parallel = TRUE</code>.</p></dd>


<dt id="arg-tau">tau<a class="anchor" aria-label="anchor" href="#arg-tau"></a></dt>
<dd><p>The \(tau\) parameter for <em>exponential filtering</em> detrending.
This must be a positive number. Set this to "auto" to use Nolan's algorithm
to automatically find a suitable value for this parameter (recommended).
For multi-channel images, it is possible to have a different <code>tau</code> for each
channel by specifying <code>tau</code> as a vector or list.</p></dd>


<dt id="arg-degree">degree<a class="anchor" aria-label="anchor" href="#arg-degree"></a></dt>
<dd><p>The degree of the polynomial to use for the polynomial
detrending. This must be a positive integer. Set this to "auto" to use
Nolan's algorithm to automatically find a suitable value for this parameter
(recommended). For multi-channel images, it is possible to have a different
<code>degree</code> for each channel by specifying <code>degree</code> as a vector or list.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Silently, a character vector of the paths to the detrended images.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>These functions include a thresholding option, unlike their non-batch
processing counterparts which they wrap (i.e. <a href="detrending.html">img_detrend_boxcar</a>,
<a href="detrending.html">img_detrend_exp</a> and <a href="detrending.html">img_detrend_polynom</a>). This is because, when working
interactively, it's easy to threshold and then detrend, but for batch
processing, it's not so easy to efficiently do one after the other, so it's
nice to have that taken care of should you want it.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">setwd</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.copy</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"bleached.tif"</span>, package <span class="op">=</span> <span class="st">"detrendr"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"img"</span>, <span class="st">"2ch_ij.tif"</span>, package <span class="op">=</span> <span class="st">"ijtiff"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="st">"."</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">dir_detrend_robinhood</span><span class="op">(</span>thresh <span class="op">=</span> <span class="st">"huang"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">dir_detrend_boxcar</span><span class="op">(</span>l <span class="op">=</span> <span class="st">"auto"</span>, thresh <span class="op">=</span> <span class="st">"tri"</span>, purpose <span class="op">=</span> <span class="st">"FFS"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">dir_detrend_exp</span><span class="op">(</span>tau <span class="op">=</span> <span class="st">"auto"</span>, thresh <span class="op">=</span> <span class="st">"tri"</span>, purpose <span class="op">=</span> <span class="st">"FCS"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">dir_detrend_polynom</span><span class="op">(</span>degree <span class="op">=</span> <span class="st">"auto"</span>, thresh <span class="op">=</span> <span class="st">"huang"</span>, purpose <span class="op">=</span> <span class="st">"FFS"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Rory Nolan.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

